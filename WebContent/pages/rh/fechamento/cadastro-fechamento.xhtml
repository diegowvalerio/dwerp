<?xml version="1.0" encoding="UTF-8"?>	
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:adm="http://github.com/adminfaces"
	template="/WEB-INF/templates/template.xhtml">
	
	<ui:define name="head">
	<script type="text/javascript">
	
	</script>
	
	<style type="text/css">  
            .color_50 {  
                background-color: #CEF6E3;  
            }  
            
            .color_60 {  
                background-color: #A9E2F3;  
            }
            
            .color_100 {  
                background-color: #F5A9D0;  
            }
     </style>
	
	</ui:define>
	
	<ui:define name="title">
        Cadastro
    </ui:define>

	<ui:define name="body">
	
		<f:metadata>
		</f:metadata>

		<adm:breadcrumb title="Cadastro Cadastro" link="cadastro-geral.xhtml" />
		<h:form id="form" rendered="#{beanControleAcesso.acesso('cadastro_cadastro')}">
			<p:growl id="erros" showDetail="true" sticky="false" />
			
			<p:tabView dynamic="false" cache="false" id="tabview">
				<p:tab title="Dados" id="dados">
				
				<p:panelGrid id="painelf" columns="04"	 columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
				layout="grid" styleClass="ui-fluid card">
						
						<p:outputLabel value="Funcionário :" for="funcionario" />
						<p:inputText id="funcionario"	value="#{beanFechamento.fechamento.funcionario.nome}" disabled="true"/>
						
										
						<p:outputLabel value="Salário :" for="salario" />
						<p:inputNumber id="salario" disabled="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." 
							value="#{beanFechamento.fechamento.salario}" />
							
						<p:outputLabel value="Insalubridade :" for="insalubridade" />
						<p:inputNumber id="insalubridade" disabled="false" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." 
							value="#{beanFechamento.fechamento.insalubridade}" />
							
						<p:outputLabel value="Adicional Noturno :" for="adicionalnoturno" />
						<p:inputNumber id="adicionalnoturno" disabled="true" symbol=" %" symbolPosition="s"  
                			decimalSeparator="," thousandSeparator="." 
							value="#{beanFechamento.fechamento.adicionalnoturno}" />
							
						<p:outputLabel value="Adicional Fixo :" for="adicionalfixo" />
						<p:inputNumber id="adicionalfixo" disabled="true" symbol="R$ "   
                			decimalSeparator="," thousandSeparator="." 
							value="#{beanFechamento.fechamento.adicionalfixo}" />
							
						<p:outputLabel value="Função :" for="funcao" />
						<p:inputText id="funcao"	value="#{beanFechamento.fechamento.funcao}" disabled="true"/>
                   		
                   		<p:outputLabel value="Setor :" for="setor" />
						<p:inputText id="setor"	value="#{beanFechamento.fechamento.setor}" disabled="true"/>
																								
				</p:panelGrid>
				
				<p:separator></p:separator>
				
				<p:panelGrid id="paineld" columns="06"	 columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
				layout="grid" styleClass="ui-fluid card" >
						
						<p:outputLabel value="Mês :" for="mes" />
						<p:selectOneMenu id="mes"
							value="#{beanFechamento.fechamento.mes}">
							<f:selectItem itemLabel="Selecionar" noSelectionOption="true" />
							<f:selectItem itemLabel="1" itemValue="1" />
							<f:selectItem itemLabel="2" itemValue="2" />
							<f:selectItem itemLabel="3" itemValue="3" />
							<f:selectItem itemLabel="4" itemValue="4" />
							<f:selectItem itemLabel="5" itemValue="5" />
							<f:selectItem itemLabel="6" itemValue="6" />
							<f:selectItem itemLabel="7" itemValue="7" />
							<f:selectItem itemLabel="8" itemValue="8" />
							<f:selectItem itemLabel="9" itemValue="9" />
							<f:selectItem itemLabel="10" itemValue="10" />
							<f:selectItem itemLabel="11" itemValue="11" />
							<f:selectItem itemLabel="12" itemValue="12" />
						</p:selectOneMenu>
						
						<p:outputLabel value="Ano :" for="ano" />
						<p:selectOneMenu id="ano"
							value="#{beanFechamento.fechamento.ano}">
							<f:selectItem itemLabel="Selecionar" noSelectionOption="true" />
							<f:selectItem itemLabel="2020" itemValue="2020" />
							<f:selectItem itemLabel="2021" itemValue="2021" />
							<f:selectItem itemLabel="2022" itemValue="2022" />
							<f:selectItem itemLabel="2023" itemValue="2023" />
							<f:selectItem itemLabel="2024" itemValue="2024" />
							<f:selectItem itemLabel="2025" itemValue="2025" />
							<f:selectItem itemLabel="2026" itemValue="2026" />
							<f:selectItem itemLabel="2027" itemValue="2027" />
							<f:selectItem itemLabel="2028" itemValue="2028" />
							<f:selectItem itemLabel="2029" itemValue="2029" />
							<f:selectItem itemLabel="2030" itemValue="2030" />
						</p:selectOneMenu>
						
						<p:outputLabel for="observacao" value="Observacão"/>
                   		<p:inputText id="observacao" maxlength="250" 
                   			value="#{beanFechamento.fechamento.observacao}"/>
                   		
				</p:panelGrid>
				<p:tabView dynamic="false" cache="false" id="tabview2">
				
					<p:tab title="Horas Extras" id="horasextras">
					
					<p:panelGrid id="painel_horaextra_total" style="width: 100%">
					<f:facet name="header">
						<p:row>
							<p:column colspan="6" style="border: 1px solid">Resumo Horas Extras</p:column>																		
						</p:row>
						<p:row>
							<p:column colspan="3" style="border: 1px solid">Normais</p:column>	
							<p:column colspan="2" style="border: 1px solid">Insalubres</p:column>	
							<p:column rowspan="2" colspan="1" style="border: 1px solid; width: 50%">Observação</p:column>																		
						</p:row>
						<p:row>
							<p:column colspan="1" style="border: 1px solid; text-align: Left">Tipo</p:column>	
							<p:column colspan="1" style="border: 1px solid; text-align: Left">Horas</p:column>		
							<p:column colspan="1" style="border: 1px solid; text-align: Left">Valor Total</p:column>
							<p:column colspan="1" style="border: 1px solid; text-align: Left">Horas</p:column>		
							<p:column colspan="1" style="border: 1px solid; text-align: Left">Valor Total</p:column>								
						</p:row>
					</f:facet>
					<p:row>
					
					<p:column style="border: 1px solid; text-align: Left; background-color: #CEF6E3">
						<p:outputLabel value="50%"></p:outputLabel>
					</p:column>
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText  id="horaextra_50_qtde_hora"
							value="#{beanFechamento.fechamento.horaextra_50_qtde_hora}"
						 disabled="true">
						</p:inputText>
					</p:column>								
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputNumber id="horaextra_50_valor_total" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.horaextra_50_valor_total}" />
					</p:column>	
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText  id="horaextra_50_qtde_hora_insalubre"
							value="#{beanFechamento.fechamento.horaextra_50_qtde_hora_insalubre}"
						 disabled="true">
						</p:inputText>
					</p:column>								
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputNumber id="horaextra_50_valor_total_insalubre" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.horaextra_50_valor_total_insalubre}" />
					</p:column>	
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText id="horaextra_50_observacao" maxlength="250" style="width: 100%"
                   			value="#{beanFechamento.fechamento.horaextra_50_observacao}"/>
					</p:column>	
					</p:row>
					<p:row>			
					<p:column style="border: 1px solid; text-align: Left; background-color: #A9E2F3">
						<p:outputLabel value="60%"></p:outputLabel>
					</p:column>
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText  id="horaextra_60_qtde_hora"
							value="#{beanFechamento.fechamento.horaextra_60_qtde_hora}"
						 disabled="true">
						</p:inputText>
					</p:column>													
											
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputNumber id="horaextra_60_valor_total" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.horaextra_60_valor_total}" />
					</p:column>	
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText  id="horaextra_60_qtde_hora_insalubre"
							value="#{beanFechamento.fechamento.horaextra_60_qtde_hora_insalubre}"
						 disabled="true">
						</p:inputText>
					</p:column>													
											
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputNumber id="horaextra_60_valor_total_insalubre" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.horaextra_60_valor_total_insalubre}" />
					</p:column>	
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText id="horaextra_60_observacao" maxlength="250" style="width: 100%"
                   			value="#{beanFechamento.fechamento.horaextra_60_observacao}"/>
					</p:column>	
					</p:row>
					
					<p:row>			
					<p:column style="border: 1px solid; text-align: Left; background-color: #F5A9D0">
						<p:outputLabel value="100%"></p:outputLabel>
					</p:column>
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText  id="horaextra_100_qtde_hora"
							value="#{beanFechamento.fechamento.horaextra_100_qtde_hora}"
						 disabled="true">
						</p:inputText>
					</p:column>
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputNumber id="horaextra_100_valor_total" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.horaextra_100_valor_total}" />
					</p:column>
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText  id="horaextra_100_qtde_hora_insalubre"
							value="#{beanFechamento.fechamento.horaextra_100_qtde_hora_insalubre}"
						 disabled="true">
						</p:inputText>
					</p:column>
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputNumber id="horaextra_100_valor_total_insalubre" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.horaextra_100_valor_total_insalubre}" />
					</p:column>	
					
					<p:column style="border: 1px solid; text-align: Left">
						<p:inputText id="horaextra_100_observacao" maxlength="250" style="width: 100%"
                   			value="#{beanFechamento.fechamento.horaextra_100_observacao}"/>
					</p:column>	
					</p:row>
					</p:panelGrid>
					
					<p:separator></p:separator>
					
					<p:commandButton id="nve" value="Gerar" icon="fa fa-plus"
						styleClass="btn-primary"
						style="margin-top: 10px; horizontal-align:left;"
						action="#{beanFechamento.addNovo}"
						update=":form:tabview:tabview2:tabela_horaextra">
						<f:setPropertyActionListener
							target="#{beanFechamento.horaExtra.fechamento}"
							value="#{beanFechamento.fechamento}" />
					</p:commandButton>
					
					<p:commandButton id="atualizar" value="Atualizar" icon="fa fa-plus"
						styleClass="btn-success"
						style="margin-top: 10px; horizontal-align:left;"
						action="#{beanFechamento.atualiza()}"
						update=":form:erros :form:tabview:tabview2:painel_horaextra_total :form:tabview:tabview2:tabela_horaextra">
					</p:commandButton>
					
					<p:dataTable id="tabela_horaextra" value="#{beanFechamento.horasextras}" var="items"
						editable="true" editMode="cell" style="width:100%" rowStyleClass="#{items.tipo_60 != null ? 'color_60' : null or items.tipo_50 != null ? 'color_50' : null or items.tipo_100 != null  ? 'color_100' : null}">
						
						<f:facet name="header">Lista Horas Extras</f:facet>
						
						<p:column headerText="Dia" width="4%" style="border: 1px solid; text-align: Left" styleClass="#{items.diadasemana eq 'Sáb' or items.diadasemana eq 'Dom' ? 'color_100' : null}" >
							<h:outputLabel value="#{items.diadasemana}" >
							</h:outputLabel>
						</p:column>
						
						<p:column headerText="Data" width="8%" style="border: 1px solid; text-align: Left">
						<h:outputLabel value="#{items.data}" >
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</h:outputLabel>
						</p:column>
						
						
						<p:column headerText="Hora" width="8%" style="border: 1px solid; text-align: Left" >
							<p:cellEditor>
								<f:facet name="output"> 
									<p:outputLabel value="#{items.qtdehora}">
										<f:convertDateTime pattern="HH:mm" locale="pt_BR" timeZone="America/Sao_Paulo" type="time"/>
									</p:outputLabel>
								</f:facet>
                				<f:facet name="input">
                					<p:calendar locale="pt_BR" 
										value="#{items.qtdehora}"
										pattern="HH:mm" mask="true" showOn="">
										<p:ajax event="change" listener="#{beanFechamento.verifica_total_semana(items.data)}" update=":form:tabview:tabview2:tabela_horaextra"/>
									</p:calendar>
                				</f:facet>							
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="50%" width="6%" style="border: 1px solid; text-align: Left">
							<p:cellEditor>
								<f:facet name="output"> 
									<p:outputLabel value="#{items.tipo_50}">
										<f:convertDateTime pattern="HH:mm" locale="pt_BR" timeZone="America/Sao_Paulo" type="time"/>
									</p:outputLabel>
								</f:facet>
                				<f:facet name="input">
                					<p:calendar locale="pt_BR" 
										value="#{items.tipo_50}"
										pattern="HH:mm" mask="true" showOn="">
									</p:calendar>
                				</f:facet>							
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="60%" width="6%" style="border: 1px solid; text-align: Left">
							<p:cellEditor>
								<f:facet name="output"> 
									<p:outputLabel value="#{items.tipo_60}">
										<f:convertDateTime pattern="HH:mm" locale="pt_BR" timeZone="America/Sao_Paulo" type="time"/>
									</p:outputLabel>
								</f:facet>
                				<f:facet name="input">
                					<p:calendar locale="pt_BR" 
										value="#{items.tipo_60}"
										pattern="HH:mm" mask="true" showOn="">
									</p:calendar>
                				</f:facet>							
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="100%" width="6%" style="border: 1px solid; text-align: Left">
							<p:cellEditor>
								<f:facet name="output"> 
									<p:outputLabel value="#{items.tipo_100}">
										<f:convertDateTime pattern="HH:mm" locale="pt_BR" timeZone="America/Sao_Paulo" type="time"/>
									</p:outputLabel>
								</f:facet>
                				<f:facet name="input">
                					<p:calendar locale="pt_BR" 
										value="#{items.tipo_100}"
										pattern="HH:mm" mask="true" showOn="">
									</p:calendar>
                				</f:facet>							
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="Insalubre" width="6%" style="border: 1px solid; text-align: Left">								
						<h:selectBooleanCheckbox  
								value="#{items.insalubre}" />
						</p:column>
						
						<p:column headerText="Valor Unitário" width="8%" style="border: 1px solid; text-align: Left">
						<h:outputLabel value="#{items.valor_unitario}" >
							<f:convertNumber type="currency" currencySymbol="R$" />
						</h:outputLabel>
						</p:column>
						
						<p:column headerText="Valor Total" width="8%" style="border: 1px solid; text-align: Left">
						<h:outputLabel value="#{items.valor_total}" >
							<f:convertNumber type="currency" currencySymbol="R$" />
						</h:outputLabel>
						</p:column>
						
						<p:column headerText="Observação" style="border: 1px solid; text-align: Left">
							<p:cellEditor>
								<f:facet name="output"> 
									<p:outputLabel value="#{items.observacao}"></p:outputLabel>
								</f:facet>
                				<f:facet name="input">
                					<p:inputText value="#{items.observacao}"></p:inputText> 
                				</f:facet>							
							</p:cellEditor>
						</p:column>

					</p:dataTable>	
										
					</p:tab>
					
					<p:tab title="Faltas" id="faltas">
					
						<p:panelGrid id="painel_falta" columns="06"	columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
						layout="grid" styleClass="ui-fluid card">
						
							<p:outputLabel value="Qtde Dia Falta :" for="falta_qtde_dia" />
							<p:inputNumber id="falta_qtde_dia" 
							value="#{beanFechamento.fechamento.falta_qtde_dia}" />
							
							<p:outputLabel value="Qtde Hora Falta :" for="falta_qtde_hora" />
							<p:calendar locale="pt_BR" id="falta_qtde_hora"
							value="#{beanFechamento.fechamento.falta_qtde_hora}"
							pattern="HH:mm" mask="true" showOn="">
							</p:calendar>
							
							<p:outputLabel for="falta_observacao" value="Observacão"/>
                   			<p:inputText id="falta_observacao" maxlength="250" 
                   			value="#{beanFechamento.fechamento.falta_observacao}"/>
				
						</p:panelGrid>
					</p:tab>
					
					<p:tab title="Diárias" id="diarias">
					
						<p:panelGrid id="painel_diaria" columns="08"	columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
						layout="grid" styleClass="ui-fluid card">
						
							<p:outputLabel value="Qtde Diária :" for="diaria_qtde_dia" />
							<p:inputNumber id="diaria_qtde_dia" value="#{beanFechamento.fechamento.diaria_qtde_dia}" >
								<p:ajax event="blur" listener="#{beanFechamento.calcula_diaria()}" update=":form:tabview:tabview2:painel_diaria"/>
							</p:inputNumber>
							
							<p:outputLabel value="Valor Unitário :" for="diaria_valor_unitario" />
							<p:inputNumber id="diaria_valor_unitario" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.diaria_valor_unitario}" />
							
							<p:outputLabel value="Total :" for="diaria_valor_total" />
							<p:inputNumber id="diaria_valor_total" emptyValue="true" symbol="R$ "  
                			decimalSeparator="," thousandSeparator="." disabled="true"
							value="#{beanFechamento.fechamento.diaria_valor_total}" />
							
							<p:outputLabel for="diaria_observacao" value="Observacão"/>
                   			<p:inputText id="diaria_observacao" maxlength="250" 
                   			value="#{beanFechamento.fechamento.diaria_observacao}"/>
				
						</p:panelGrid>
					</p:tab>
					
				</p:tabView>
				</p:tab>				
				
			</p:tabView>				
			<p:separator></p:separator>
			<p:commandButton action="#{beanFechamento.salvar()}" value="Salvar"
				icon="fa fa-check" styleClass="btn-primary" update="erros" />
		</h:form>

	</ui:define>

</ui:composition>